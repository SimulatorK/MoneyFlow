<!DOCTYPE html>
<html lang="en" data-theme="{% if dark_mode %}dark{% else %}light{% endif %}">
<head>
    <meta charset="UTF-8">
    <title>About | MoneyFlow</title>
    <link rel="stylesheet" href="/static/app.css">
    <style>
        :root {
            --bg-primary: #f5f6fa;
            --bg-card: #fff;
            --bg-header: linear-gradient(135deg, #1a3366 0%, #243869 50%, #2d4a7c 100%);
            --text-primary: #222;
            --text-secondary: #667a9a;
            --text-heading: #243869;
            --border-light: #e8eef8;
            --nav-bg: #243869;
            --accent: #3875e8;
        }
        [data-theme="dark"] {
            --bg-primary: #1a1d24;
            --bg-card: #242830;
            --bg-header: linear-gradient(135deg, #0d1117 0%, #161920 50%, #1f242d 100%);
            --text-primary: #e4e6eb;
            --text-secondary: #98a3b8;
            --text-heading: #b8c5db;
            --border-light: #353a47;
            --nav-bg: #161920;
            --accent: #4d8ef0;
        }
        /* Professional Header - Logo on left, partially overlayed */
        .app-header-brand {
            display: inline-flex;
            align-items: center;
            position: relative;
            padding-left: 30px;
        }
        .app-header-logo {
            position: absolute;
            left: 0;
            width: 56px;
            height: 56px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.25);
            opacity: 0.85;
            z-index: 1;
        }
        .app-header-text {
            position: relative;
            z-index: 2;
            padding-left: 35px;
            text-align: left;
            white-space: nowrap;
        }
        .app-title {
            margin: 0;
            font-size: 2.2em;
            font-weight: 800;
            color: #fff;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5), 0 0 25px rgba(56,117,232,0.3);
            letter-spacing: -0.01em;
            line-height: 1.1;
        }
        .app-subtitle {
            font-size: 0.8em;
            color: rgba(255,255,255,0.9);
            text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
            margin-top: 0.15em;
            margin-left: 2px;
        }
        
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); }
        
        /* App Header with Profile */
        .app-header {
            background: var(--bg-header);
            padding: 1em 2em;
            display: flex; align-items: center; justify-content: space-between;
            border-bottom: 3px solid var(--accent);
        }
        .header-left { flex: 1; }
        .header-center { flex: 2; text-align: center; }
        .header-right { flex: 1; display: flex; justify-content: flex-end; align-items: center; gap: 1em; }
        .app-title { margin: 0; font-size: 2.2em; font-weight: 700; color: #fff; letter-spacing: -0.02em; }
        .app-title .icon { margin-right: 0.3em; }
        .app-subtitle { margin: 0.3em 0 0 0; font-size: 0.9em; color: rgba(255,255,255,0.75); }
        .app-version { display: inline-block; background: rgba(255,255,255,0.15); padding: 0.15em 0.6em; border-radius: 12px; font-size: 0.75em; color: rgba(255,255,255,0.9); margin-left: 0.5em; }
        .about-link { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.9em; padding: 0.5em 1em; border-radius: 6px; background: rgba(255,255,255,0.2); }
        
        /* Profile dropdown */
        .profile-dropdown { position: relative; }
        .profile-btn { display: flex; align-items: center; gap: 0.5em; background: rgba(255,255,255,0.1); border: none; padding: 0.5em 1em; border-radius: 8px; cursor: pointer; color: #fff; font-size: 0.9em; }
        .profile-btn:hover { background: rgba(255,255,255,0.2); }
        .profile-avatar { width: 44px; height: 44px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1.1em; overflow: hidden; border: 2px solid rgba(255,255,255,0.3); }
        .profile-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .dropdown-menu { display: none; position: absolute; right: 0; top: 100%; background: var(--bg-card); border-radius: 10px; box-shadow: 0 8px 30px rgba(0,0,0,0.25); min-width: 200px; margin-top: 0.5em; z-index: 1000; overflow: hidden; }
        .dropdown-menu.active { display: block; }
        .dropdown-header { padding: 1em; background: var(--border-light); }
        .dropdown-header .name { font-weight: 600; color: var(--text-heading); }
        .dropdown-header .username { font-size: 0.85em; color: var(--text-secondary); }
        .dropdown-item { display: block; padding: 0.8em 1em; color: var(--text-primary); text-decoration: none; font-size: 0.9em; }
        .dropdown-item:hover { background: var(--border-light); }
        .dropdown-item.danger { color: #dc3545; }
        .dropdown-divider { height: 1px; background: var(--border-light); }
        
        /* Navigation */
        nav { background: var(--nav-bg); padding: 0; display: flex; justify-content: center; }
        .tabs { display: flex; gap: 0; }
        .tab { color: rgba(255,255,255,0.8); text-decoration: none; padding: 1em 1.5em; font-size: 0.95em; font-weight: 500; border-bottom: 3px solid transparent; }
        .tab:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab.active { color: #fff; background: rgba(255,255,255,0.1); border-bottom-color: var(--accent); font-weight: 600; }
        
        /* Page Content */
        .page-content { max-width: 1200px; margin: 0 auto; padding: 2em; }
        
        .page-header { text-align: center; margin-bottom: 2em; }
        .page-header h1 { color: var(--text-heading); font-size: 2.5em; margin: 0 0 0.3em 0; }
        .page-header p { color: var(--text-secondary); font-size: 1.1em; max-width: 700px; margin: 0 auto; }
        
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5em; }
        
        .feature-card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(60,90,170,0.08);
            padding: 1.5em;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .feature-card:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(60,90,170,0.12); }
        
        .feature-card h2 {
            color: var(--text-heading); font-size: 1.3em; margin: 0 0 0.5em 0;
            display: flex; align-items: center; gap: 0.5em;
        }
        .feature-card h2 .icon { font-size: 1.3em; }
        
        .feature-card p { color: var(--text-secondary); font-size: 0.95em; margin: 0 0 1em 0; line-height: 1.6; }
        
        .feature-list { list-style: none; padding: 0; margin: 0; }
        .feature-list li {
            padding: 0.5em 0; border-bottom: 1px solid var(--border-light);
            font-size: 0.9em; color: var(--text-primary);
            display: flex; align-items: flex-start; gap: 0.5em;
        }
        .feature-list li:last-child { border-bottom: none; }
        .feature-list li::before { content: '‚úì'; color: #28a745; font-weight: bold; }
        
        .cta-section {
            background: linear-gradient(135deg, var(--accent) 0%, #2d5cc9 100%);
            border-radius: 12px; padding: 2em; text-align: center; margin-top: 2em; color: #fff;
        }
        .cta-section h2 { margin: 0 0 0.5em 0; font-size: 1.5em; }
        .cta-section p { margin: 0 0 1em 0; opacity: 0.9; }
        .cta-btn {
            display: inline-block; background: #fff; color: var(--accent);
            padding: 0.8em 2em; border-radius: 8px; text-decoration: none;
            font-weight: 600; transition: transform 0.2s;
        }
        .cta-btn:hover { transform: scale(1.05); }
        
        .version-info { text-align: center; margin-top: 2em; padding: 1em; color: var(--text-secondary); font-size: 0.9em; }
        
        /* About page tabs */
        .about-tabs { display: flex; gap: 0.5em; margin-bottom: 1.5em; justify-content: center; }
        .about-tab-btn { 
          padding: 0.7em 1.5em; border: 2px solid var(--border-light); background: var(--bg-card);
          border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text-secondary);
          transition: all 0.2s;
        }
        .about-tab-btn:hover { border-color: var(--accent); color: var(--text-heading); }
        .about-tab-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }
        .about-tab-content { display: none; }
        .about-tab-content.active { display: block; }
        
        /* API Docs styling */
        .api-section { background: var(--bg-card); border-radius: 12px; padding: 1.5em; margin-bottom: 1.5em; }
        .api-section h3 { color: var(--accent); margin: 0 0 1em 0; font-size: 1.2em; border-bottom: 2px solid var(--border-light); padding-bottom: 0.5em; }
        .api-endpoint { background: var(--bg-primary); border-radius: 8px; padding: 1em; margin-bottom: 1em; }
        .api-endpoint .method { display: inline-block; padding: 0.2em 0.6em; border-radius: 4px; font-weight: 700; font-size: 0.8em; margin-right: 0.5em; }
        .api-endpoint .method.get { background: #28a745; color: #fff; }
        .api-endpoint .method.post { background: #007bff; color: #fff; }
        .api-endpoint .method.delete { background: #dc3545; color: #fff; }
        .api-endpoint .path { font-family: monospace; color: var(--text-heading); }
        .api-endpoint .desc { margin-top: 0.5em; font-size: 0.9em; color: var(--text-secondary); }
        .api-table { width: 100%; border-collapse: collapse; margin-top: 0.5em; font-size: 0.85em; }
        .api-table th { text-align: left; background: var(--border-light); padding: 0.5em; }
        .api-table td { padding: 0.5em; border-bottom: 1px solid var(--border-light); }
        .api-table code { background: rgba(56,117,232,0.1); padding: 0.1em 0.4em; border-radius: 3px; font-size: 0.9em; }
        .type-badge { display: inline-block; padding: 0.1em 0.4em; border-radius: 4px; font-size: 0.75em; font-weight: 600; }
        .type-badge.string { background: #e8f5e9; color: #2e7d32; }
        .type-badge.number { background: #e3f2fd; color: #1565c0; }
        .type-badge.boolean { background: #fce4ec; color: #c2185b; }
        .type-badge.date { background: #fff3e0; color: #ef6c00; }
        .type-badge.enum { background: #f3e5f5; color: #7b1fa2; }
    </style>
</head>
<body>
  <!-- App Header with Profile Dropdown -->
  <header class="app-header">
    <div class="header-left"></div>
    <div class="header-center">
      <div class="app-header-brand">
        <img src="/static/apple-touch-icon.png" alt="" class="app-header-logo">
        <div class="app-header-text">
          <h1 class="app-title">MoneyFlow</h1>
          <p class="app-subtitle">Your personal finance command center</p>
        </div>
      </div>
    </div>
    <div class="header-right">
      <a href="/about" class="about-link">‚ÑπÔ∏è About</a>
      <div class="profile-dropdown">
        <button class="profile-btn" onclick="toggleProfileDropdown()">
          <div class="profile-avatar">
            {% if profile_picture_b64 %}
            <img src="data:{{ profile_picture_type }};base64,{{ profile_picture_b64 }}" alt="">
            {% else %}
            {{ user.name[0].upper() }}
            {% endif %}
          </div>
          <span>{{ user.name.split()[0] }}</span>
          <span style="font-size:0.7em;">‚ñº</span>
        </button>
        <div class="dropdown-menu" id="profileDropdown">
          <div class="dropdown-header">
            <div class="name">{{ user.name }}</div>
            <div class="username">@{{ user.username }}</div>
          </div>
          <a href="/profile" class="dropdown-item">‚öôÔ∏è Account Settings</a>
          <a href="/profile#data" class="dropdown-item">üìä Manage Data</a>
          <div class="dropdown-divider"></div>
          <a href="/logout" class="dropdown-item danger">üö™ Sign Out</a>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Navigation -->
  <nav>
    <div class="tabs">
      <a href="/home" class="tab">Dashboard</a>
      <a href="/budget" class="tab">Budget</a>
      <a href="/expenses" class="tab">Expenses</a>
      <a href="/income-taxes" class="tab">Income & Taxes</a>
      <a href="/tools" class="tab">Tools</a>
      <a href="/forum" class="tab">Resources</a>
    </div>
  </nav>

  <div class="page-content">
    <div class="page-header">
      <h1>üìö About MoneyFlow</h1>
      <p>MoneyFlow is a comprehensive personal finance suite designed to give you complete control over your financial life. 
         Track every dollar, plan your budget with precision, monitor your net worth growth, and optimize your taxes‚Äîall in a single, 
         beautifully designed application built for real-world financial management.</p>
    </div>
    
    <!-- Tab Navigation -->
    <div class="about-tabs">
      <button class="about-tab-btn active" onclick="showAboutTab('overview')">üìñ Overview</button>
      <button class="about-tab-btn" onclick="showAboutTab('api')">üîß API Reference</button>
    </div>
    
    <!-- Overview Tab -->
    <div id="tab-overview" class="about-tab-content active">
    <div class="feature-grid">
      <!-- Dashboard -->
      <div class="feature-card">
        <h2><span class="icon">üè†</span> Dashboard</h2>
        <p>Get a complete overview of your financial health with interactive visualizations.</p>
        <ul class="feature-list">
          <li>Sankey chart showing money flow from income to expenses</li>
          <li>Monthly summary with gross/net income and surplus</li>
          <li>Budget vs Actual spending summary with variance tracking</li>
          <li>Net Worth snapshot with performance metrics</li>
          <li>Spending trends by category and subcategory</li>
          <li>Month-over-month comparison charts</li>
          <li>Unbudgeted expense warnings</li>
        </ul>
      </div>
      
      <!-- Budget -->
      <div class="feature-card">
        <h2><span class="icon">üìã</span> Budget Management</h2>
        <p>Plan and track your monthly budget with fixed and variable expenses.</p>
        <ul class="feature-list">
          <li>Fixed costs tracking (rent, utilities, subscriptions)</li>
          <li>Variable expense budgeting with categories</li>
          <li>Option to use tracked averages or fixed amounts</li>
          <li>Customizable budget rule targets (default 50/30/20)</li>
          <li>Utilities & Subscriptions tracker with historical trends</li>
          <li>Budget vs Actual spending comparison</li>
          <li>Unbudgeted expense detection with warnings</li>
          <li>Flexible payment frequencies (weekly to annually)</li>
        </ul>
      </div>
      
      <!-- Expenses -->
      <div class="feature-card">
        <h2><span class="icon">üí∞</span> Expense Tracking</h2>
        <p>Record and analyze your spending with detailed categorization.</p>
        <ul class="feature-list">
          <li>Add individual expenses with date and notes</li>
          <li>Create custom categories and subcategories</li>
          <li>Mark expenses as recurring with frequency</li>
          <li>Bulk upload via CSV file</li>
          <li>Filter by time period (1 month to all time)</li>
          <li>Visual charts: bar graphs and pie charts</li>
        </ul>
      </div>
      
      <!-- Income & Taxes -->
      <div class="feature-card">
        <h2><span class="icon">üìä</span> Income & Tax Calculator</h2>
        <p>Comprehensive tax calculations with multi-year bracket support.</p>
        <ul class="feature-list">
          <li>Federal income tax with progressive brackets</li>
          <li>State tax calculations (Missouri)</li>
          <li>FICA taxes (Social Security & Medicare)</li>
          <li>Support for tax years 2023-2026</li>
          <li>Capital gains (short-term and long-term)</li>
          <li>ISO stock option AMT calculations</li>
          <li>Pre-tax deductions (401k, HSA, health insurance)</li>
          <li>Tax credits with detailed breakdown</li>
          <li>Per-paycheck breakdown</li>
        </ul>
      </div>
      
      <!-- Tools -->
      <div class="feature-card">
        <h2><span class="icon">üîß</span> Financial Tools</h2>
        <p>Helpful calculators and tools for financial planning.</p>
        <ul class="feature-list">
          <li>Net Worth Manager with monthly aggregation</li>
          <li>Investment projections with contributions</li>
          <li>Monte Carlo retirement simulations</li>
          <li>Mortgage/Home loan calculator</li>
          <li>Scenario comparison (compare two mortgages)</li>
          <li>Amortization schedule generation</li>
          <li>Portfolio allocation tracking</li>
        </ul>
      </div>
      
      <!-- Resources -->
      <div class="feature-card">
        <h2><span class="icon">üìö</span> Financial Resources</h2>
        <p>Curated links to helpful financial information and tools.</p>
        <ul class="feature-list">
          <li>Personal finance blogs and advice</li>
          <li>Tax resources and IRS links</li>
          <li>Budgeting guides and tips</li>
          <li>Investment and retirement resources</li>
          <li>Financial news sources</li>
          <li>External calculators and tools</li>
        </ul>
      </div>
      
      <!-- Profile & Settings -->
      <div class="feature-card">
        <h2><span class="icon">‚öôÔ∏è</span> Profile & Settings</h2>
        <p>Customize your experience and manage your account.</p>
        <ul class="feature-list">
          <li>Profile picture upload</li>
          <li>Dark/light mode toggle</li>
          <li>Password change</li>
          <li>Data management and export</li>
          <li>Account deletion option</li>
        </ul>
      </div>
      
      <!-- Technical -->
      <div class="feature-card">
        <h2><span class="icon">üíª</span> Technical Features</h2>
        <p>Built with modern technologies for reliability and performance.</p>
        <ul class="feature-list">
          <li>FastAPI backend with Python</li>
          <li>SQLite database with SQLAlchemy ORM</li>
          <li>Responsive design for all devices</li>
          <li>Dark mode support</li>
          <li>CSV import/export capabilities</li>
          <li>Secure authentication</li>
        </ul>
      </div>
    </div>
    
    {% if not user %}
    <div class="cta-section">
      <h2>Ready to Take Control of Your Finances?</h2>
      <p>Create a free account and start tracking your money today.</p>
      <a href="/register" class="cta-btn">Create Account</a>
    </div>
    {% endif %}
    
    <div class="version-info" style="background: linear-gradient(135deg, rgba(56,117,232,0.1) 0%, rgba(56,117,232,0.05) 100%); border-radius: 12px; padding: 1.5em;">
      <div style="display: flex; align-items: center; justify-content: center; gap: 1em; margin-bottom: 1em;">
        <img src="/static/apple-touch-icon.png" alt="" style="width: 48px; height: 48px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
        <div>
          <p style="margin: 0; font-size: 1.2em;"><strong>MoneyFlow</strong> <span style="background: var(--accent); color: #fff; padding: 0.2em 0.6em; border-radius: 12px; font-size: 0.7em; font-weight: 700;">v2.0.0</span></p>
          <p style="margin: 0.2em 0 0 0; font-size: 0.85em; color: var(--text-secondary);">Your Complete Personal Finance Command Center</p>
        </div>
      </div>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5em; margin: 1.5em 0; text-align: left;">
        <div>
          <p style="margin: 0 0 0.5em 0; font-weight: 700; color: var(--accent);">üöÄ What's New in v2.0.0:</p>
          <ul style="margin: 0; font-size: 0.88em; padding-left: 1.2em;">
            <li><strong>Utilities & Subscriptions Tracker</strong> - Monitor recurring costs with spending trends over time, seasonal analysis, and multi-account filtering</li>
            <li><strong>Budget vs Actual Dashboard</strong> - Real-time comparison of budgeted vs actual spending with variance tracking</li>
            <li><strong>Unbudgeted Expense Detection</strong> - Automatic flagging of spending in untracked categories</li>
            <li><strong>Customizable Budget Rules</strong> - Configure your own allocation targets beyond the standard 50/30/20</li>
            <li><strong>Budget Data Import/Export</strong> - Bulk manage your budget with CSV templates</li>
            <li><strong>Professional UI Refresh</strong> - Enhanced visuals with improved header design and dark mode support</li>
          </ul>
        </div>
        <div>
          <p style="margin: 0 0 0.5em 0; font-weight: 700; color: var(--accent);">‚ú® Key Features:</p>
          <ul style="margin: 0; font-size: 0.88em; padding-left: 1.2em;">
            <li><strong>Interactive Dashboard</strong> - Sankey chart money flow visualization</li>
            <li><strong>Smart Expense Tracking</strong> - Autocomplete categories, optional vendor tracking, recurring expense support</li>
            <li><strong>Net Worth Manager</strong> - Track assets, liabilities, investment accounts with tax treatment analysis</li>
            <li><strong>Tax Calculator</strong> - Federal, state, and FICA with multi-year bracket support (2023-2026)</li>
            <li><strong>Monte Carlo Simulator</strong> - Retirement projections with probability analysis</li>
            <li><strong>CSV Import/Export</strong> - Bulk data management for expenses, net worth, and budget</li>
          </ul>
        </div>
      </div>
      
      <div style="border-top: 1px solid var(--border-light); padding-top: 1em; margin-top: 1em; text-align: center;">
        <p style="margin: 0 0 0.5em 0; font-size: 0.9em;">Built with ‚ù§Ô∏è using FastAPI, SQLAlchemy, and Chart.js</p>
        <p style="margin: 0; font-size: 0.85em; color: var(--text-secondary);">Questions or feedback? Email <a href="mailto:mason.j.kelchner@gmail.com" style="color: var(--accent);">mason.j.kelchner@gmail.com</a></p>
      </div>
    </div>
    </div><!-- End Overview Tab -->
    
    <!-- API Reference Tab -->
    <div id="tab-api" class="about-tab-content">
      <div class="api-section">
        <h3>üìä Data Types Reference</h3>
        <p style="color: var(--text-secondary); margin-bottom: 1em;">Understanding the data types and enumerations used throughout the application.</p>
        
        <!-- Account Types -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Account Types (Net Worth Manager)</h4>
          <table class="api-table">
            <thead><tr><th>Type Code</th><th>Display Name</th><th>Category</th><th>Tax Treatment</th></tr></thead>
            <tbody>
              <tr><td><code>401k</code></td><td>401(k) Traditional</td><td>Asset</td><td><span class="type-badge enum">tax_deferred</span></td></tr>
              <tr><td><code>roth_401k</code></td><td>401(k) Roth</td><td>Asset</td><td><span class="type-badge enum">tax_free</span></td></tr>
              <tr><td><code>after_tax_401k</code></td><td>401(k) After-Tax</td><td>Asset</td><td><span class="type-badge enum">partially_taxable</span></td></tr>
              <tr><td><code>ira</code></td><td>Traditional IRA</td><td>Asset</td><td><span class="type-badge enum">tax_deferred</span></td></tr>
              <tr><td><code>roth_ira</code></td><td>Roth IRA</td><td>Asset</td><td><span class="type-badge enum">tax_free</span></td></tr>
              <tr><td><code>hsa</code></td><td>HSA</td><td>Asset</td><td><span class="type-badge enum">tax_free</span></td></tr>
              <tr><td><code>brokerage</code></td><td>Brokerage Account</td><td>Asset</td><td><span class="type-badge enum">taxable</span></td></tr>
              <tr><td><code>savings</code></td><td>Savings Account</td><td>Asset</td><td><span class="type-badge enum">taxable</span></td></tr>
              <tr><td><code>checking</code></td><td>Checking Account</td><td>Asset</td><td><span class="type-badge enum">taxable</span></td></tr>
              <tr><td><code>mortgage</code></td><td>Mortgage</td><td>Liability</td><td>N/A</td></tr>
              <tr><td><code>car_loan</code></td><td>Auto Loan</td><td>Liability</td><td>N/A</td></tr>
              <tr><td><code>student_loan</code></td><td>Student Loan</td><td>Liability</td><td>N/A</td></tr>
              <tr><td><code>credit_card</code></td><td>Credit Card</td><td>Liability</td><td>N/A</td></tr>
            </tbody>
          </table>
        </div>
        
        <!-- Frequency Types -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Frequency Options</h4>
          <table class="api-table">
            <thead><tr><th>Value</th><th>Description</th><th>Per Year</th></tr></thead>
            <tbody>
              <tr><td><code>weekly</code></td><td>Every week</td><td>52</td></tr>
              <tr><td><code>bi-weekly</code></td><td>Every two weeks</td><td>26</td></tr>
              <tr><td><code>semi-monthly</code></td><td>Twice per month</td><td>24</td></tr>
              <tr><td><code>monthly</code></td><td>Once per month</td><td>12</td></tr>
              <tr><td><code>quarterly</code></td><td>Every three months</td><td>4</td></tr>
              <tr><td><code>annually</code></td><td>Once per year</td><td>1</td></tr>
            </tbody>
          </table>
        </div>
        
        <!-- Tax Treatment -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Tax Treatment Categories</h4>
          <table class="api-table">
            <thead><tr><th>Treatment</th><th>Description</th><th>Example Accounts</th></tr></thead>
            <tbody>
              <tr><td><span class="type-badge enum">tax_free</span></td><td>Qualified withdrawals are not taxed</td><td>Roth IRA, Roth 401k, HSA</td></tr>
              <tr><td><span class="type-badge enum">tax_deferred</span></td><td>Withdrawals taxed as ordinary income</td><td>Traditional 401k, Traditional IRA</td></tr>
              <tr><td><span class="type-badge enum">taxable</span></td><td>Subject to capital gains tax</td><td>Brokerage, Savings, Checking</td></tr>
              <tr><td><span class="type-badge enum">partially_taxable</span></td><td>Basis tax-free, gains taxed</td><td>After-Tax 401k</td></tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üíæ CSV Import Formats</h3>
        
        <!-- Expense CSV -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Expense CSV Upload</h4>
          <p class="desc">Upload expenses in bulk via CSV file at <code>/expenses</code></p>
          <table class="api-table">
            <thead><tr><th>Column</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code>date</code></td><td><span class="type-badge date">date</span></td><td>Yes</td><td>YYYY-MM-DD format</td></tr>
              <tr><td><code>amount</code></td><td><span class="type-badge number">number</span></td><td>Yes</td><td>Expense amount (positive number)</td></tr>
              <tr><td><code>category</code></td><td><span class="type-badge string">string</span></td><td>Yes</td><td>Category name (created if new)</td></tr>
              <tr><td><code>subcategory</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Subcategory name (created if new)</td></tr>
              <tr><td><code>notes</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Optional notes</td></tr>
            </tbody>
          </table>
        </div>
        
        <!-- Net Worth CSV -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Net Worth CSV Upload</h4>
          <p class="desc">Import account balances at <code>/tools</code> ‚Üí Net Worth Manager</p>
          <table class="api-table">
            <thead><tr><th>Column</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code>account_name</code></td><td><span class="type-badge string">string</span></td><td>Yes</td><td>Account display name</td></tr>
              <tr><td><code>account_type</code></td><td><span class="type-badge enum">enum</span></td><td>Yes</td><td>See Account Types above</td></tr>
              <tr><td><code>is_asset</code></td><td><span class="type-badge boolean">boolean</span></td><td>Yes</td><td>"true" or "false"</td></tr>
              <tr><td><code>institution</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Bank/institution name</td></tr>
              <tr><td><code>balance_date</code></td><td><span class="type-badge date">date</span></td><td>Yes</td><td>YYYY-MM-DD format</td></tr>
              <tr><td><code>balance</code></td><td><span class="type-badge number">number</span></td><td>Yes</td><td>Account balance</td></tr>
              <tr><td><code>notes</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Optional notes</td></tr>
            </tbody>
          </table>
        </div>
        
        <!-- Budget CSV -->
        <div class="api-endpoint">
          <h4 style="margin: 0 0 0.5em 0; color: var(--text-heading);">Budget CSV Upload</h4>
          <p class="desc">Import budget items at <code>/budget</code> ‚Üí Import button. Supports fixed costs, variable items, subscriptions, and subscription payments. Subscriptions are automatically added to variable expense tracking with BudgetItems created for tracked averages.</p>
          <table class="api-table">
            <thead><tr><th>Column</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code>type</code></td><td><span class="type-badge enum">enum</span></td><td>Yes</td><td>"fixed_cost", "budget_item", "subscription", or "subscription_payment"</td></tr>
              <tr><td><code>name</code></td><td><span class="type-badge string">string</span></td><td>Yes*</td><td>Name of the item (* for fixed_cost, budget_item, subscription)</td></tr>
              <tr><td><code>category_type</code></td><td><span class="type-badge enum">enum</span></td><td>No</td><td>"need" or "want" for 50/30/20 rule</td></tr>
              <tr><td><code>amount</code></td><td><span class="type-badge number">number</span></td><td>Yes*</td><td>Dollar amount (* for fixed_cost, budget_item, subscription_payment)</td></tr>
              <tr><td><code>frequency</code></td><td><span class="type-badge enum">enum</span></td><td>No</td><td>Payment frequency for fixed costs</td></tr>
              <tr><td><code>expense_category</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Expense category name to link to (for budget_item and subscription). Creates/links to existing category.</td></tr>
              <tr><td><code>expense_subcategory</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Expense subcategory name (for budget_item and subscription). Creates/links to existing subcategory.</td></tr>
              <tr><td><code>use_tracked_average</code></td><td><span class="type-badge boolean">boolean</span></td><td>No</td><td>"true" to use expense average, "false" for fixed amount</td></tr>
              <tr><td><code>tracking_period_months</code></td><td><span class="type-badge number">number</span></td><td>No</td><td>3, 6, or 12 months for rolling average (default: 6 for subscriptions)</td></tr>
              <tr><td><code>add_to_budget</code></td><td><span class="type-badge boolean">boolean</span></td><td>No</td><td>"true" to create BudgetItem for subscriptions (default: true). Enables variable expense tracking.</td></tr>
              <tr><td><code>subscription_name</code></td><td><span class="type-badge string">string</span></td><td>Yes**</td><td>Which subscription for payments (** for subscription_payment)</td></tr>
              <tr><td><code>payment_date</code></td><td><span class="type-badge date">date</span></td><td>Yes**</td><td>YYYY-MM-DD format (** for subscription_payment)</td></tr>
              <tr><td><code>utility_type</code></td><td><span class="type-badge enum">enum</span></td><td>No</td><td>"subscription", "utility", or "service"</td></tr>
              <tr><td><code>notes</code></td><td><span class="type-badge string">string</span></td><td>No</td><td>Optional notes</td></tr>
            </tbody>
          </table>
          <p class="desc" style="margin-top: 1em;"><strong>Note:</strong> When importing subscriptions with <code>add_to_budget=true</code> (default), the system automatically creates BudgetItems and links them to expense categories. Tracked averages will include both regular expenses AND subscription payment history for accurate budget calculations.</p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üîó API Endpoints - Expenses</h3>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/categories</span>
          <p class="desc">Get all expense categories for current user</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/subcategories/{category_id}</span>
          <p class="desc">Get all subcategories for a specific category</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/vendors</span>
          <p class="desc">Get all vendors for current user</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/expense/{expense_id}</span>
          <p class="desc">Get details of a specific expense</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/expenses/add</span>
          <p class="desc">Add a new expense (form data: date, amount, category_id, subcategory_id, vendor_id, notes, is_recurring, recurring_frequency)</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/expenses/update/{expense_id}</span>
          <p class="desc">Update an existing expense</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method delete">DELETE</span><span class="path">/expenses/{expense_id}</span>
          <p class="desc">Delete an expense by ID</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/expenses/csv-export</span>
          <p class="desc">Export all expenses as CSV file</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/expenses/csv-upload</span>
          <p class="desc">Import expenses from CSV file</p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üîó API Endpoints - Budget</h3>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/budget-item/{item_id}</span>
          <p class="desc">Get details of a budget item including tracked averages</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/fixed-cost/{cost_id}</span>
          <p class="desc">Get details of a fixed cost budget item</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/rolling-averages/{category_id}/{subcategory_id}</span>
          <p class="desc">Get rolling expense averages (3/6/12 months) for a category/subcategory. Use 0 for subcategory_id to get all subcategories.</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/fixed-cost/add</span>
          <p class="desc">Add a fixed cost to the budget</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/item/add</span>
          <p class="desc">Add a variable expense budget item</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/item/update/{item_id}</span>
          <p class="desc">Update a budget item including tracking period</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method delete">DELETE</span><span class="path">/budget/fixed-cost/{cost_id}</span>
          <p class="desc">Delete a fixed cost</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method delete">DELETE</span><span class="path">/budget/item/{item_id}</span>
          <p class="desc">Delete a budget item</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/budget/csv-export</span>
          <p class="desc">Export all budget data (fixed costs, variable items, subscriptions) as CSV</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/csv-import</span>
          <p class="desc">Import budget data from CSV file</p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üîó API Endpoints - Subscriptions & Utilities</h3>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/subscriptions</span>
          <p class="desc">Get all subscriptions/utilities with statistics</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/subscription/{subscription_id}</span>
          <p class="desc">Get details of a subscription including payment history and monthly chart data</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/subscription/add</span>
          <p class="desc">Add a new subscription/utility (optionally creates a variable expense budget item)</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/subscription/update/{subscription_id}</span>
          <p class="desc">Update a subscription/utility</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method delete">DELETE</span><span class="path">/budget/subscription/{subscription_id}</span>
          <p class="desc">Delete a subscription and all its payments</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/budget/subscription/payment/add</span>
          <p class="desc">Record a payment for a subscription</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method delete">DELETE</span><span class="path">/budget/subscription/payment/{payment_id}</span>
          <p class="desc">Delete a subscription payment</p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üîó API Endpoints - Net Worth & Tools</h3>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/accounts</span>
          <p class="desc">Get all net worth accounts for current user</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/account/{account_id}</span>
          <p class="desc">Get details of a net worth account</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/tools/account/add</span>
          <p class="desc">Add a new net worth account</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/tools/balance/add</span>
          <p class="desc">Add a balance entry for an account</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/tools/networth/csv-export</span>
          <p class="desc">Export all net worth data as CSV file</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/tools/networth/csv-upload</span>
          <p class="desc">Import net worth data from CSV file</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/tools/montecarlo/run</span>
          <p class="desc">Run Monte Carlo retirement simulation. Body: <code>{"years": 30, "num_simulations": 1000, "show_todays_dollars": true}</code></p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üîó API Endpoints - Income & Taxes</h3>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/api/income-taxes</span>
          <p class="desc">Get income and tax configuration for current user</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method post">POST</span><span class="path">/income-taxes/save</span>
          <p class="desc">Save income and tax configuration (salary, deductions, tax year, etc.)</p>
        </div>
        
        <div class="api-endpoint">
          <span class="method get">GET</span><span class="path">/income-taxes/csv-export</span>
          <p class="desc">Export income and tax data as CSV</p>
        </div>
      </div>
      
      <div class="api-section">
        <h3>üìã Budget Item Types</h3>
        <div class="api-endpoint">
          <table class="api-table">
            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code>category_type</code></td><td><span class="type-badge enum">enum</span></td><td>"need" or "want" for 50/30/20 tracking</td></tr>
              <tr><td><code>amount_mode</code></td><td><span class="type-badge enum">enum</span></td><td>"fixed" or "tracked" for fixed costs</td></tr>
              <tr><td><code>use_tracked_average</code></td><td><span class="type-badge boolean">boolean</span></td><td>Use rolling average from expense data</td></tr>
              <tr><td><code>tracking_period_months</code></td><td><span class="type-badge number">number</span></td><td>3, 6, or 12 month rolling average</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div><!-- End API Tab -->
  </div>
  
  <script>
    function toggleProfileDropdown() {
      document.getElementById('profileDropdown').classList.toggle('active');
    }
    document.addEventListener('click', function(e) {
      const dropdown = document.querySelector('.profile-dropdown');
      if (dropdown && !dropdown.contains(e.target)) {
        document.getElementById('profileDropdown')?.classList.remove('active');
      }
    });
    
    // About page tab switching
    function showAboutTab(tabName) {
      // Update buttons
      document.querySelectorAll('.about-tab-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      // Update content
      document.querySelectorAll('.about-tab-content').forEach(tab => tab.classList.remove('active'));
      document.getElementById('tab-' + tabName).classList.add('active');
    }
  </script>
</body>
</html>

