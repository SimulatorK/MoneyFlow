<!DOCTYPE html>
<html lang="en" data-theme="{% if dark_mode %}dark{% else %}light{% endif %}">
<head>
    <meta charset="UTF-8">
    <title>{{ title }} | MoneyFlow</title>
    <link rel="stylesheet" href="/static/app.css">
    <style>
        :root {
            --bg-primary: #f5f6fa;
            --bg-card: #fff;
            --bg-header: linear-gradient(135deg, #1a3366 0%, #243869 50%, #2d4a7c 100%);
            --text-primary: #222;
            --text-secondary: #667a9a;
            --text-heading: #243869;
            --border-light: #e8eef8;
            --nav-bg: #243869;
            --accent: #3875e8;
            --accent-glow: rgba(56, 117, 232, 0.1);
        }
        [data-theme="dark"] {
            --bg-primary: #1a1d24;
            --bg-card: #242830;
            --bg-header: linear-gradient(135deg, #0d1117 0%, #161920 50%, #1f242d 100%);
            --text-primary: #e4e6eb;
            --text-secondary: #98a3b8;
            --text-heading: #b8c5db;
            --border-light: #353a47;
            --nav-bg: #161920;
            --accent: #4d8ef0;
            --accent-glow: rgba(77, 142, 240, 0.15);
        }
        .app-title {
          margin: 0;
          font-size: 2.2em;
          font-weight: 700;
          color: #fff;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
        }
        
        .app-title img.app-icon {
          width: 48px;
          height: 48px;
          max-width: 48px;
          max-height: 48px;
          border-radius: 6px;
          flex-shrink: 0;
        }
        
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); }
        
        /* App Header with Profile */
        .app-header {
            background: var(--bg-header);
            padding: 1em 2em;
            display: flex; align-items: center; justify-content: space-between;
            border-bottom: 3px solid var(--accent);
        }
        .header-left { flex: 1; }
        .header-center { flex: 2; text-align: center; }
        .header-right { flex: 1; display: flex; justify-content: flex-end; align-items: center; gap: 1em; }
        .app-title { margin: 0; font-size: 2.2em; font-weight: 700; color: #fff; }
        .app-title .icon { margin-right: 0.3em; }
        .app-subtitle { margin: 0.3em 0 0 0; font-size: 0.9em; color: rgba(255,255,255,0.75); }
        .app-version { display: inline-block; background: rgba(255,255,255,0.15); padding: 0.15em 0.6em; border-radius: 12px; font-size: 0.75em; color: rgba(255,255,255,0.9); margin-left: 0.5em; }
        .about-link { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.9em; padding: 0.5em 1em; border-radius: 6px; background: rgba(255,255,255,0.1); }
        .about-link:hover { background: rgba(255,255,255,0.2); color: #fff; }
        
        /* Profile dropdown */
        .profile-dropdown { position: relative; }
        .profile-btn { display: flex; align-items: center; gap: 0.5em; background: rgba(255,255,255,0.1); border: none; padding: 0.5em 1em; border-radius: 8px; cursor: pointer; color: #fff; font-size: 0.9em; }
        .profile-btn:hover { background: rgba(255,255,255,0.2); }
        .profile-avatar { width: 44px; height: 44px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1.1em; overflow: hidden; border: 2px solid rgba(255,255,255,0.3); }
        .profile-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .dropdown-menu { display: none; position: absolute; right: 0; top: 100%; background: var(--bg-card); border-radius: 10px; box-shadow: 0 8px 30px rgba(0,0,0,0.25); min-width: 200px; margin-top: 0.5em; z-index: 1000; overflow: hidden; }
        .dropdown-menu.active { display: block; }
        .dropdown-header { padding: 1em; background: var(--border-light); }
        .dropdown-header .name { font-weight: 600; color: var(--text-heading); }
        .dropdown-header .username { font-size: 0.85em; color: var(--text-secondary); }
        .dropdown-item { display: block; padding: 0.8em 1em; color: var(--text-primary); text-decoration: none; font-size: 0.9em; }
        .dropdown-item:hover { background: var(--border-light); }
        .dropdown-item.danger { color: #dc3545; }
        .dropdown-divider { height: 1px; background: var(--border-light); }
        
        /* Navigation */
        nav { background: var(--nav-bg); padding: 0; display: flex; justify-content: center; }
        .tabs { display: flex; gap: 0; }
        .tab { color: rgba(255,255,255,0.8); text-decoration: none; padding: 1em 1.5em; font-size: 0.95em; font-weight: 500; border-bottom: 3px solid transparent; }
        .tab:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab.active { color: #fff; background: rgba(255,255,255,0.1); border-bottom-color: var(--accent); font-weight: 600; }
        
        /* Page Content */
        .page-content { max-width: 1200px; margin: 0 auto; padding: 2em; }
        
        .page-header {
            text-align: center; margin-bottom: 2em;
        }
        .page-header h2 {
            margin: 0; color: var(--text-heading); font-size: 1.8em;
        }
        .page-header p {
            color: var(--text-secondary); margin: 0.5em 0 0 0; font-size: 1.05em;
        }
        
        /* Resource Categories */
        .resource-category {
            margin-bottom: 2em;
        }
        .category-header {
            display: flex; align-items: center; gap: 0.5em;
            margin-bottom: 1em; padding-bottom: 0.5em;
            border-bottom: 2px solid var(--border-light);
        }
        .category-header h3 {
            margin: 0; color: var(--text-heading); font-size: 1.2em;
        }
        
        /* Resource Cards Grid */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1em;
        }
        
        .resource-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.2em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            transition: all 0.2s;
            border: 1px solid var(--border-light);
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .resource-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-color: var(--accent);
        }
        .resource-card .card-header {
            display: flex; align-items: center; gap: 0.6em; margin-bottom: 0.6em;
        }
        .resource-card .icon {
            font-size: 1.5em;
        }
        .resource-card .name {
            font-weight: 600; font-size: 1.05em; color: var(--text-heading);
        }
        .resource-card .description {
            font-size: 0.9em; color: var(--text-secondary); line-height: 1.5;
        }
        .resource-card .link-hint {
            margin-top: 0.8em; font-size: 0.8em; color: var(--accent);
            display: flex; align-items: center; gap: 0.3em;
        }
        
        /* Tips Section */
        .tips-section {
            background: var(--accent-glow);
            border-radius: 12px;
            padding: 1.5em;
            margin-top: 2em;
            border: 1px solid var(--accent);
        }
        .tips-section h4 {
            margin: 0 0 0.8em 0; color: var(--text-heading);
            display: flex; align-items: center; gap: 0.4em;
        }
        .tips-list {
            margin: 0; padding-left: 1.5em;
            color: var(--text-secondary);
        }
        .tips-list li {
            margin-bottom: 0.5em;
        }
        
        @media (max-width: 600px) {
            .resources-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
  <!-- App Header with Profile Dropdown -->
  <header class="app-header">
    <div class="header-left"></div>
    <div class="header-center">
      <h1 class="app-title">
        <img
          src="/static/apple-touch-icon.png"
          alt="MoneyFlow"
          class="app-icon"
        />
        MoneyFlow
        <span class="app-version">v1.2.0</span>
      </h1>
      <p class="app-subtitle">Your personal finance command center</p>
    </div>
    <div class="header-right">
      <a href="/about" class="about-link">‚ÑπÔ∏è About</a>
      <div class="profile-dropdown">
        <button class="profile-btn" onclick="toggleProfileDropdown()">
          <div class="profile-avatar">
            {% if profile_picture_b64 %}<img src="data:{{ profile_picture_type }};base64,{{ profile_picture_b64 }}" alt="">{% else %}{{ user.name[0].upper() }}{% endif %}
          </div>
          <span>{{ user.name.split()[0] }}</span>
          <span style="font-size:0.7em;">‚ñº</span>
        </button>
        <div class="dropdown-menu" id="profileDropdown">
          <div class="dropdown-header">
            <div class="name">{{ user.name }}</div>
            <div class="username">@{{ user.username }}</div>
          </div>
          <a href="/profile" class="dropdown-item">‚öôÔ∏è Account Settings</a>
          <a href="/profile#data" class="dropdown-item">üìä Manage Data</a>
          <div class="dropdown-divider"></div>
          <a href="/logout" class="dropdown-item danger">üö™ Sign Out</a>
        </div>
      </div>
    </div>
  </header>
  
  <nav>
    <div class="tabs">
      <a href="/home" class="tab">Dashboard</a>
      <a href="/budget" class="tab">Budget</a>
      <a href="/expenses" class="tab">Expenses</a>
      <a href="/income-taxes" class="tab">Income & Taxes</a>
      <a href="/tools" class="tab">Tools</a>
      <a href="/forum" class="tab active">Resources</a>
    </div>
  </nav>

  <div class="page-content">
    <div class="page-header">
      <h2>üìñ Financial Resources</h2>
      <p>Curated links to reputable financial blogs, tools, and educational content</p>
    </div>
    
    {% for category in resources %}
    <div class="resource-category">
      <div class="category-header">
        <h3>{{ category.category }}</h3>
      </div>
      <div class="resources-grid">
        {% for source in category.sources %}
        <a href="{{ source.url }}" target="_blank" rel="noopener noreferrer" class="resource-card">
          <div class="card-header">
            <span class="icon">{{ source.icon }}</span>
            <span class="name">{{ source.name }}</span>
          </div>
          <div class="description">{{ source.description }}</div>
          <div class="link-hint">
            Visit site ‚Üí
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
    
    <div class="tips-section">
      <h4>üí° Financial Literacy Tips</h4>
      <ul class="tips-list">
        <li><strong>Start with the basics:</strong> Understand your income, expenses, and net worth before diving into investments.</li>
        <li><strong>Build an emergency fund:</strong> Aim for 3-6 months of expenses in a high-yield savings account.</li>
        <li><strong>Maximize tax-advantaged accounts:</strong> Contribute to 401(k), IRA, and HSA before taxable accounts.</li>
        <li><strong>Diversify investments:</strong> Low-cost index funds offer broad market exposure with minimal fees.</li>
        <li><strong>Review regularly:</strong> Check your budget and investments at least quarterly to stay on track.</li>
      </ul>
    </div>
  </div>
  
  <script>
    function toggleProfileDropdown() {
      document.getElementById('profileDropdown').classList.toggle('active');
    }
    
    document.addEventListener('click', function(e) {
      const dropdown = document.querySelector('.profile-dropdown');
      if (dropdown && !dropdown.contains(e.target)) {
        document.getElementById('profileDropdown').classList.remove('active');
      }
    });
  </script>
</body>
</html>

